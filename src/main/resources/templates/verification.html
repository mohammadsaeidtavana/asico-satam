<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" lang="fa" dir="rtl" x-bind:class="darkMode ? 'dark' : ''" x-data="{ darkMode: false }">

<head>
    <meta name="robots" content="noindex,nofollow,noarchive" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" th:href="@{assets/images/logo/favicon.png}" />
    <link rel="stylesheet" th:href="@{assets/css/dependencies/swiper-bundle.min.css}" />
    <link rel="stylesheet" th:href="@{assets/css/dependencies/plyr.min.css}" />
    <link rel="stylesheet" th:href="@{assets/css/fonts.css}" />
    <link rel="stylesheet" th:href="@{assets/css/app.css}" />
    <title>سامانه توسعه و انتصاب مدیریت (ستام) </title>

    <style>

        .message-box {
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            margin-bottom: 15px;
        }

        .message {
            color: #333;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <div class="min-h-screen flex items-center justify-center bg-background p-5">
        <div class="w-full max-w-sm space-y-5">
            <div class="bg-gradient-to-b from-secondary to-background rounded-3xl space-y-5 px-5 pb-5">
                <div class="bg-background rounded-b-3xl space-y-2 p-5">
                    <a href="/home" class="inline-flex items-center gap-3 text-primary">
                        <img src="./assets/images/logo/favicon.png" height="70" width="70">
                        <span class="flex flex-col items-start">
                             <span class="font-black text-xl">سامانه توسعه و انتصاب مدیریت (ستام)</span>
                            <span class="font-semibold text-sm text-muted"> شرکت آتیه صبا </span>
                        </span>
                    </a>
                </div>

                <!-- auth:verification:form -->
                <form action="v1/otp/verify" method="post" onsubmit="validateOtpCode()" class="space-y-3">
                    <div class="flex items-center gap-3">
                        <div class="flex items-center gap-1">
                            <div class="w-1 h-1 bg-foreground rounded-full"></div>
                            <div class="w-2 h-2 bg-foreground rounded-full"></div>
                        </div>
                        <div class="font-black text-foreground">کد ورود را وارد کنید </div>
                    </div>
                    <div class="text-sm text-muted space-y-3">
                        <p>کد ورود 6 رقمی  برای شماره <span dir="ltr" th:text="${session.otpPhone}"></span> پیامک شد</p>
                    </div>

                    <input type="hidden" name="otpPhone" th:value="${session.otpPhone}" />
                    <!-- form:field:wrapper -->
                    <div class="flex flex-col relative space-y-1">
                        <input type="text" inputmode="numeric" dir="ltr"
                               name="otpCode"  id="otpCode"
                            class="form-input w-full h-11 peer !ring-0 !ring-offset-0 bg-secondary border-border focus:border-border invalid:!border-error rounded-xl text-lg tracking-9 text-center text-foreground invalid:!text-error placeholder:text-right px-5"
                            pattern="[0-9]+" maxlength="6" minlength="6"/>

                        <!-- form:field:error message -->

                        <span class="hidden peer-invalid:block font-semibold text-xs text-error mt-2"
                              th:text="${session.errorMessage}"  >
                            مقدار وارد شده باید  شامل  6 عدد باشد.
                        </span>

                        <!-- end form:field:error message -->
                    </div>
                    <!-- end form:field:wrapper -->

                    <!-- form:submit button -->
                    <button type="submit"
                        class="flex items-center justify-center gap-1 w-full h-10 bg-primary rounded-full text-primary-foreground transition-all hover:opacity-80 px-4">
                        <span class="font-semibold text-sm">تایید</span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                            <path fill-rule="evenodd"
                                d="M14.78 14.78a.75.75 0 0 1-1.06 0L6.5 7.56v5.69a.75.75 0 0 1-1.5 0v-7.5A.75.75 0 0 1 5.75 5h7.5a.75.75 0 0 1 0 1.5H7.56l7.22 7.22a.75.75 0 0 1 0 1.06Z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </button>
                    <!-- end form:submit button -->
                </form>

                <div class="text-sm text-muted space-y-3">
                    <p>   شماره موبایل اشتباه است ؟ <span dir="ltr"><a th:href="@{/userlogin}">ویرایش شماره</a></span> </p>
                </div>

                <div class="text-sm text-muted space-y-3">
                    <p>   کد ورود را دریافت نکردید ؟ <span dir="ltr"><a th:href="@{v1/otp/resend(phone=${session.otpPhone})}">ارسال مجدد</a></span> </p>
                </div>

            <!-- auth:verification:form -->
            </div>
            <div class="bg-secondary rounded-xl space-y-5 p-5">
                <div class="font-medium text-xs text-center text-muted">
                    ورود شما به معنای پذیرش <a href="#"
                        class="text-foreground transition-colors hover:text-primary hover:underline">شرایط</a> و
                    <a href="#" class="text-foreground transition-colors hover:text-primary hover:underline">قوانین
                        حریم خصوصی</a> است.
                </div>
            </div>
        </div>
    </div>

    <script>
        function validateOtpCode() {
            var phoneNumber = document.getElementById("otpCode").value;
            var phoneNumberPattern = /^\d{6}$/; // Assuming a 6-digit phone number

            if (phoneNumber === ""){
                alert(" لطفا کد احراز 6 رقمی خود را به درستی وارد نمایید ");
                return false;
            }
            if (!phoneNumberPattern.test(phoneNumber)) {
                alert(" لطفا کد احراز 6 رقمی خود را به درستی وارد نمایید ");
                return false;
            }else {
                return true;
            }
        }
    </script>

    <script th:src="@{assets/js/dependencies/alpinejs.min.js}"></script>
    <script th:src="@{assets/js/dependencies/swiper-bundle.min.js}"></script>
    <script th:src="@{assets/js/dependencies/plyr.min.js}"></script>
    <script th:src="@{assets/js/app.js}"></script>
</body>

</html>